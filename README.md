# Enemies
Каждый моб в игре состоит из нескольких компонентов

Основные (Common):
1. EnemyController (EC) - содержит основные параметры (индекс, позиция, биом, жидкость и др) и ссылки на все модули. Вызывает события при смене Tilemap позиции
2. EC_pms - содержит текущие параметры (здоровье, стамина, скорость и др). Содержит привязку к интерфейсу IDamageable, считающему входящий урон
3. EC_states - обрабатывает временные состояния объекта (no move, is jumping, is hit, is invulnerable, player in sight и др). Содержит метод проверки видимости персонажа из-за стен (FindSight)
4. EC_audio - содержит звуки состояний для каждого моба (prepare, hit, death). Реализует логику приоритетов и кулдаунов для избегания наложения звуков друг на друга.
5. EC_drop - содержит список шансов и предметов для реализации их дропа после смерти моба

Поведение (Behaviour) (по 1 на каждого моба):
1. EC_beh_walk - поведение большинства мобов. Расчитывает скорость при контакте с землей. Отслеживает уступы, возвышенности и расчитывает прыжки
2. EC_beh_fly - поведение виспов и элементалей. Расчитывает скорость в воздухе c gravityScale == 0 и отключенным коллайдером
3. EC_beh_worm - поведение всех червей. Перемещение с упором на поиск блоков земли в определенном радиусе и % агрессивности к цели
4. EC_beh_jelly - поведение медуз. Перемещение рывками, поиск максимально свободного пространства по направлению цели
5. EC_beh_fish - поведение рыб. Схоже с медузами, но работает только в воде
6. EC_beh_bird - поведение птиц. Взлёт и приземление в зависимости от приближения врага

Модули (Modules):
1. EC_triggers - ключевое звено в работе всех модулей. Содержит данные мин/макс расстояний и считает кулдауны для триггера способностей моба. При активации обновляет переменную trigId в EnemyController
2. EC_triggers_conditions - дополнительные условия для срабатывания триггеров. Может быть подключен к EC_triggers
3. EC_shoot - при срабатывании стреляет префабом bullet, расчитав угол стрельбы с учетом окружения и баллистики префаба (startSpeed, gravity)
4. EC_dash - совершает рывок в сторону цели, активируя модуль EC_contact на время атаки.
5. EC_contact - наносит урон при контакте с целью (все время или при активации через триггер)
6. EC_jump - заставляет моба совершить прыжок в сторону цели. Можно выставить параметры урона и зоны поражения при приземлении
7. EC_teleport - телепортирует моба на определенное расстояние от цели
8. EC_spawn - спавнит другого моба в определенной точке (в тч после смерти)
9. EC_buff - бафает всех союзников в определенном радиусе

Дополнительно:
В коде содержатся ссылки на аббревиатуры вроде DC.FF, DC.CC, DC.PR. Я знаю, что лучше не использовать такие наименования, но это было нужно для повышения скорости написания кода, тк я работаю один.
В любом случае:
DC - контроллер данных. Это Scriptable Object (SO), содержащий ссылки на все другие SO:
FF - содержит все базовые функции.
CC - содержит все данные персонажа.
PR - отвечает за спавн мобов, снарядов, звуков и некоторых объектов окружения.
PP - все префабы.
TT - параметры текущего мира + функции для взаимодействия с Tilemaps вроде GetTilePos, GetWorldPos, GetTileDistance. 
